<div class="app-container">
  <div class="video-page-container shadow">
    <div>
      <div class="video-wrapper">
        <iframe [src]="sanitize(body.linkvideo)" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
      </div>
    </div>
    <div class="video-info">
      <div class="video-title">{{ body.titolo }}</div>
      <div class="video-details">
        <div class="video-details-row">
          <span class="video-username">{{ body.utente_username }}</span>
          <div class="video-section">
            <div class="views">
              <!-- Display the views count here -->
              <span> Views: {{ views}}</span>
            </div>
            <div class="button-container">
              <div class="subscribe-like-container">
                <div class="subscribe-button">
                  <button (click)="trySubscribe()">{{ iscritto ? 'Unsubscribe' : 'Subscribe' }}</button>
                </div>
                <div class="like-button">
                  <button (click)="likeChange()">
                    Likes: {{ likes }}
                    <img class="img" *ngIf="utenteLiked; else otherImg" src="../../../assets/images/Like_Full.png" >
                    <ng-template #otherImg>
                      <img  class="img" src="../../../assets/images/Like_empty.png">
                    </ng-template>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
      <button class="show-description-button" (click)="toggleDescription()">{{ showDescription ? 'Nascondi descrizione' : 'Mostra descrizione' }}</button>
      <p class="video-description" [hidden]="!showDescription">{{ body.descrizione }}</p>
    </div>

    <div class="comment-section">
      <h3>Sezione commenti:</h3>
      <div class="comment-list">
        <div class="urcomment">
          <form class="CommentForm" [formGroup]="CommentForm" (submit)="registerComment()">
            <input id="inputComment" formControlName="Text" placeholder="Commenta..">
            <button type="Submit" id="buttonComment" [disabled]="!CommentForm.valid">Invia</button>
          </form>
        </div>
        <app-commento class="commento" *ngFor="let commento of comments" [commento]="commento"></app-commento>
      </div>
    </div>
  </div>
  <app-side-video-bar></app-side-video-bar>
</div>
